# End-to-End Test

Цей репозиторій містить автоматизований тест для CRM системи з використанням фреймворку [Playwright](https://playwright.dev/).

## Структура проекту

```
.
├── config/
│   └── playwright.config.js    # Конфігурація Playwright
├── fixtures/
│   ├── login-data.js       # Тестові дані для авторизації
│   └── test-data.js        # Загальні тестові дані
├── page-objects/
│   ├── ChatPage.js         # Об'єкт сторінки чату
│   ├── LoginPage.js        # Об'єкт сторінки логіну
│   └── SettingsPage.js     # Об'єкт сторінки налаштувань
├── tests/
│   └── verify-script-group-functionality.spec.js  # Специфікація тесту
├── package.json            # Залежності та скрипти проекту
└── package-lock.json       # Фіксація версій залежностей
```

## Налаштування

Проект використовує Playwright для автоматизації тестування веб-додатку. Конфігурація знаходиться в файлі `config/playwright.config.js` і налаштована для запуску тестів на трьох основних браузерах:
- Chromium
- Firefox
- Safari (WebKit)

### Параметри конфігурації:

- **Base URL**: `https://stage-astrocrm.obrio.net`
- **Таймаути**:
  - Action timeout: 15 секунд
  - Navigation timeout: 30 секунд
  - Загальний таймаут тесту: 60 секунд
- **Скріншоти**: Зберігаються лише при падінні тесту
- **Відео**: Записується при першій невдалій спробі
- **Трасування**: Збирається при першій невдалій спробі

## Page Objects

Проект використовує патерн Page Object для організації коду взаємодії зі сторінками:

### LoginPage

Клас для взаємодії зі сторінкою логіну, містить методи:
- `goto()` - перехід на сторінку логіну
- `login(username, password)` - авторизація користувача

### ChatPage

Клас для взаємодії з чатом, містить методи:
- `openFirstChat()` - відкриття першого чату зі списку

### SettingsPage

Клас для взаємодії з налаштуваннями, містить методи:
- `navigateToSettings()` - перехід до сторінки налаштувань
- `createNewGroup()` - створення нової групи скриптів
- `deleteGroup()` - видалення групи скриптів
- `confirmDelete()` - підтвердження видалення

## Тестові кейси

### verify-script-group-functionality.spec.js

Цей тест перевіряє функціональність груп скриптів (Script Groups):

1. Логін під валідним користувачем
2. Перехід до налаштувань
3. Створення нової групи скриптів
4. Перевірка відображення сповіщення про успішне створення
5. Перехід до чату
6. Відкриття першого чату
7. Перевірка наявності нової групи скриптів в інтерфейсі чату

Після проходження тесту виконується очистка тестових даних (видалення створеної групи скриптів).

## Тестові дані

### login-data.js

Містить дані для авторизації:
- Валідний користувач: `test@gmail.com`

### test-data.js

Містить загальні тестові дані:
- Назва тестової групи: `Test Group`
- Текст скрипту: `test script`

# Запуск тестів у конкретному браузері
npx playwright test --project=chromium

# Запуск в режимі debug
npx playwright test --debug
```

## Звіти

Звіти генеруються в HTML форматі. Після запуску тестів можна переглянути звіт:

```bash
npx playwright show-report
```
